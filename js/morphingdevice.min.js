function getHiddenProp(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}function isHidden(){var a=getHiddenProp();return a?document[a]:!1}var MorphingDevice=function(a,b){function l(){j.style.display="none",j.onclick=function(){q(),g.className=i?g.className.replace(/\b md-rotated\b/,""):g.className+" md-rotated";var a=i?b.devices[h].imgsrc:b.devices[h].rotatedsrc;return n(a),i=!i,!1},g.appendChild(j);var a=getHiddenProp();if(a){var c=a.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(c,function(){f&&(isHidden()?(q(),f=!0):o())})}}function m(){g.className="md-device "+b.devices[h].cName,i=!1,j.style.display=b.devices[h].canRotate?"":"none",n(b.devices[h].imgsrc)}function n(a){var b=k.parentNode,c=document.createElement("img");c.setAttribute("src",a),b.childNodes.length>1&&b.removeChild(b.firstChild),b.insertBefore(c,k),k.className="md-fadeout",k.addEventListener(d,function(){k=c,null!=this.parentNode&&this.parentNode.removeChild(this)},!1)}function o(){f=!0,p()}function p(){e=setTimeout(function(){var a=devicesTotal-1>h?h+1:0;t(nav.children[a]),h=a,m(),b.autoplay&&p()},b.interval)}function q(){f=!1,clearTimeout(e)}function r(a){h=a}function s(){return h}function t(a){var b=nav.children;b[h].className=b[h].className.replace(/\bmd-current\b/,""),a.className="md-current"}var e,c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},d=c[Modernizr.prefixed("transition")],f=!1,g=a.querySelector("div.md-device"),h=0,i=!1,j=document.createElement("button"),k=g.querySelector("a > img");return l(),{init:l,setCurrent:r,getCurrent:s,changeDevice:m,startSlideshow:o,stopSlideshow:q,updateCurrentTrigger:t}};